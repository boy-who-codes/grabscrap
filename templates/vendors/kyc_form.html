{% extends 'base.html' %}

{% block title %}KYC Verification - KABAADWALAâ„¢{% endblock %}

{% block content %}
<div class="container my-5">
    <div class="row justify-content-center">
        <div class="col-md-8">
            <div class="card shadow">
                <div class="card-header bg-warning text-dark text-center">
                    <h4><i class="bi bi-file-earmark-check"></i> KYC Verification</h4>
                    <p class="mb-0">Complete your KYC to start selling</p>
                </div>
                <div class="card-body">
                    {% if kyc and kyc.verification_status == 'rejected' %}
                    <div class="alert alert-danger">
                        <strong>KYC Rejected:</strong> {{ kyc.rejection_reason }}
                        <br>Please resubmit your documents.
                    </div>
                    {% elif kyc and kyc.verification_status == 'pending' %}
                    <div class="alert alert-info">
                        <strong>KYC Under Review:</strong> Your documents are being verified. You'll be notified once approved.
                    </div>
                    {% elif kyc and kyc.verification_status == 'verified' %}
                    <div class="alert alert-success">
                        <strong>KYC Verified:</strong> Your account is verified and ready for selling!
                    </div>
                    {% endif %}
                    
                    <form method="post" enctype="multipart/form-data">
                        {% csrf_token %}
                        
                        <h5 class="mb-3">Document Upload</h5>
                        <div class="row">
                            <div class="col-md-6 mb-3">
                                <label for="pan_document" class="form-label">PAN Card *</label>
                                <input type="file" class="form-control" id="pan_document" name="pan_document" accept=".jpg,.jpeg,.png,.pdf" {% if not kyc %}required{% endif %}>
                                {% if kyc and kyc.pan_document %}
                                <small class="text-muted">Current: <a href="{{ kyc.pan_document.url }}" target="_blank">View Document</a></small>
                                {% endif %}
                            </div>
                            <div class="col-md-6 mb-3">
                                <label for="gstin_document" class="form-label">GSTIN Certificate *</label>
                                <input type="file" class="form-control" id="gstin_document" name="gstin_document" accept=".jpg,.jpeg,.png,.pdf" {% if not kyc %}required{% endif %}>
                                {% if kyc and kyc.gstin_document %}
                                <small class="text-muted">Current: <a href="{{ kyc.gstin_document.url }}" target="_blank">View Document</a></small>
                                {% endif %}
                            </div>
                        </div>
                        
                        <h5 class="mb-3">Bank Details</h5>
                        <div class="row">
                            <div class="col-md-6 mb-3">
                                <label for="bank_account_number" class="form-label">Account Number *</label>
                                <input type="text" class="form-control" id="bank_account_number" name="bank_account_number" 
                                       value="{% if kyc %}{{ kyc.bank_account_number }}{% endif %}" required>
                            </div>
                            <div class="col-md-6 mb-3">
                                <label for="bank_ifsc" class="form-label">IFSC Code *</label>
                                <input type="text" class="form-control" id="bank_ifsc" name="bank_ifsc" 
                                       value="{% if kyc %}{{ kyc.bank_ifsc }}{% endif %}" required>
                            </div>
                        </div>
                        
                        <div class="mb-3">
                            <label for="bank_account_holder" class="form-label">Account Holder Name *</label>
                            <input type="text" class="form-control" id="bank_account_holder" name="bank_account_holder" 
                                   value="{% if kyc %}{{ kyc.bank_account_holder }}{% endif %}" required>
                        </div>
                        
                        <div class="form-check mb-3">
                            <input class="form-check-input" type="checkbox" id="verify_info" required>
                            <label class="form-check-label" for="verify_info">
                                I verify that all information provided is accurate and authentic
                            </label>
                        </div>
                        
                        <button type="submit" class="btn btn-warning w-100">
                            <i class="bi bi-upload"></i> Submit KYC Documents
                        </button>
                    </form>
                </div>
            </div>
            
            <div class="card mt-4">
                <div class="card-body">
                    <h5>KYC Requirements</h5>
                    <ul>
                        <li><strong>PAN Card:</strong> Clear photo or scan of your PAN card</li>
                        <li><strong>GSTIN Certificate:</strong> Valid GST registration certificate</li>
                        <li><strong>Bank Details:</strong> Active bank account for receiving payments</li>
                        <li><strong>Verification Time:</strong> 1-3 business days</li>
                    </ul>
                </div>
            </div>
        </div>
    </div>
</div>
{% endblock %}
